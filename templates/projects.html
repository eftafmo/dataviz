{% extends "dataviz.html" %}

{% block top %}
{% endblock %}

{% block main %}

<h1 class="page-title">Our Projects</h1>

<div class="lg-column">

  <div class="grant-dataviz" id="financial-mechanisms">
    <mechanisms
      :initial="dataset"
    >
      <h2 slot="title">Projects by financial mechanism <span style="white-space:nowrap;">2009-2014</span></h2>
    </mechanisms>
  </div>

  <div class="grant-dataviz" id="priority-sectors">
    <sectors
      :initial="dataset"
    >
      <h2 slot="title">Projects by sector</h2>
    </sectors>
  </div>

</div>


<div class="lg-column">

  <div class="grant-dataviz" id="funding-map">
    <xmap
        :initial="dataset"
        details-datasource="{% url "api:projects-beneficiary-detail" "XX" %}"
    >
      <h2 slot="title">Projects map</h2>
    </xmap>
  </div>

  <div class="grant-dataviz" id="beneficiary-states">
    <beneficiaries
        :initial="dataset"
    >
      <h2 slot="title">Projects across beneficiary states</h2>
    </beneficiaries>
  </div>

</div>

{% endblock %}

{% block aside %}

<sidebar class="sticky"
         :initial="dataset"
         projects-datasource="{% url "api:project-list" %}"
>
</sidebar>

{% endblock %}

{% block finally %}
<script>
document.addEventListener('DOMContentLoaded', () => {
  _createApp(
    Dataviz.Projects,
    {
      datasource: "/api/projects.json",
    },
  ).mount('#content')
})
</script>
{% endblock %}
